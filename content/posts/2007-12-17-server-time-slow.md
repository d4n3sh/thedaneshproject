---
title: Server time slow
author: Danesh
date: 2007-12-16T18:43:15+00:00
pvc_views:
  - 9175
dsq_thread_id:
  - 889794527

---
Another issue that popped up tonight. The time on a payroll server seem to be slower then usual. Futher troubleshooting on the box revealed that it took 4 seconds to move 1 second on the server. This caused the payroll servers to stop communicating between each other as time sync was part of a security measure built into the payroll software we run here.

Some googling later it seem to be a BUG with the kernel. The fix, suggested to either update the kernel, recompile the kernel or add some kernel parameters in GRUB to fix the issue. I decided to go with the kernel parameters because this was a production server and the downtime window was very slim.

The fix,

  1. vi /etc/boot/grub.conf
  2. Add to the end of the kernel line. &#8220;clock=pit noapic nolapic&#8221;
  3. reboot and check time. &#8220;watch date&#8221;

<!--more-->

    
    # grub.conf generated by anaconda
    #
    # Note that you do not have to rerun grub after making changes to this file
    # NOTICE:  You have a /boot partition.  This means that
    #          all kernel and initrd paths are relative to /boot/, eg.
    #          root (hd0,0)
    #          kernel /vmlinuz-version ro root=/dev/md7
    #          initrd /initrd-version.img
    #boot=/dev/sda
    default=0
    timeout=10
    splashimage=(hd0,0)/grub/splash.xpm.gz
    title Red Hat Linux (2.4.9-e.3smp)
    root (hd0,0)
    kernel /vmlinuz-2.4.9-e.3smp ro root=/dev/md7 clock=pit noapic nolapic
    initrd /initrd-2.4.9-e.3smp.img
    title Red Hat Linux Advanced Server (2.4.9-e.3)
    root (hd0,0)
    kernel /vmlinuz-2.4.9-e.3 ro root=/dev/md7 clock=pit noapic nolapic
    initrd /initrd-2.4.9-e.3.img

Source: [Rexiology::Work][1]

Source: [Linux Kernel Parameters][2]

 [1]: http://rextang.net/blogs/work/archive/2006/12/21/4516.aspx
 [2]: http://www.cyberciti.biz/howto/question/static/linux-kernel-parameters.php